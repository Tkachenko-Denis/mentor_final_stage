# Финальный проект Mentor Final Stage

Этот репозиторий содержит финальный проект. Он состоит из двух независимых сервисов на основе FastAPI: TODO-сервис и сервис сокращения URL. Оба сервиса контейнеризованы с использованием Docker и рассчитаны на работу в изолированной среде.

## Общие требования

- Каждый сервис реализован как отдельное приложение на FastAPI.
- Автоматическая документация API доступна по адресу `/docs` для каждого сервиса.
- Все данные хранятся в базе данных SQLite.
- Файл базы данных размещается в директории, которая подключается как том при запуске контейнера.

---

## TODO-сервис

Этот сервис предоставляет API для управления задачами.

### Эндпоинты

1. **GET /items/completed**:
- Получение списка выполненных задач.
2. **GET /items/incomplete**:
- Получение списка невыполненных задач.
3. **GET /items/stats**:
- Получение статистики задач (общее количество, выполненные, невыполненные).
4. **POST /items**:
- Создание задачи.
  - Параметры: `title` (обязательный), `description` (опциональный), `completed` (по умолчанию: `false`).
5. **GET /items**:
- Получение списка всех задач.
6. **GET /items/{item_id}**:
- Получение задачи по её ID.
7. **PUT /items/{item_id}**:
- Обновление задачи по её ID.
8. **DELETE /items/{item_id}**:
- Удаление задачи по её ID.

### Особенности

- При запуске сервиса автоматически создаётся таблица, если она отсутствует.
- Данные сохраняются в базе данных SQLite.

---

## Сервис сокращения URL

Этот сервис предоставляет API для сокращения URL и получения их данных.

### Эндпоинты

**POST /shorten**: 
- Принимает полный URL в формате JSON (`{"url": "..."}`).
- Возвращает короткий URL.
**GET /items**:
- Возвращает список всех записей с сокращёнными ссылками.
**GET /items/{item_id}**: 
- Возвращает информацию о записи по её ID (включая короткую ссылку и полный URL).
**GET /{short_id}**: 
- Перенаправляет на полный URL, если он существует.
**GET /stats/{short_id}**: 
- Возвращает JSON с информацией о короткой ссылке (короткий и полный URL).
**PUT /{short_id}**: 
- Обновляет полный URL, связанный с короткой ссылкой.
**DELETE /{short_id}**: 
- Удаляет запись по короткой ссылке.

### Особенности

- При запуске сервиса автоматически создаётся таблица, если она отсутствует.
- Данные сохраняются в базе данных SQLite.

---

## Контейнеризация (Docker)

Каждый сервис включает `Dockerfile` для упрощения контейнеризации.

### Содержание `Dockerfile`

- Устанавливает зависимости из файла `requirements.txt`.
- Копирует исходный код сервиса в контейнер.
- Объявляет том (`VOLUME /app/data`) для хранения данных.
- Запускает приложение FastAPI с использованием `uvicorn` на порту 80.

### Запуск сервисов через Docker

Сервисы можно запустить с помощью следующих команд:

#### TODO-сервис

```bash
docker run -d -p 8000:80 -v todo_data:/app/data denistkachenko/todo_service:latest
```
#### Сервис сокращения URL

```bash
docker run -d -p 8000:80 -v todo_data:/app/data denistkachenko/shorturl_service:latest
```
