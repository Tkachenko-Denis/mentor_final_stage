# Финальный проект Mentor Final Stage

Этот репозиторий содержит финальный проект. Он состоит из двух независимых сервисов на основе FastAPI: TODO-сервис и сервис сокращения URL. Оба сервиса контейнеризованы с использованием Docker и рассчитаны на работу в изолированной среде.

## Общие требования

- Каждый сервис реализован как отдельное приложение на FastAPI.
- Автоматическая документация API доступна по адресу `/docs` для каждого сервиса.
- Все данные хранятся в базе данных SQLite.
- Файл базы данных размещается в директории, которая подключается как том при запуске контейнера.

---

## TODO-сервис

Этот сервис предоставляет API для управления задачами.

### Эндпоинты

- **POST /items**: Создание задачи.
  - Параметры: `title` (обязательный), `description` (опциональный), `completed` (по умолчанию: `false`).
- **GET /items**: Получение списка всех задач.
- **GET /items/{item_id}**: Получение задачи по её ID.
- **PUT /items/{item_id}**: Обновление задачи по её ID.
- **DELETE /items/{item_id}**: Удаление задачи по её ID.
- **GET /items/completed**: Получение списка выполненных задач.
- **GET /items/incomplete**: Получение списка невыполненных задач.
- **GET /items/stats**: Получение статистики задач (общее количество, выполненные, невыполненные).

### Особенности

- При запуске сервиса автоматически создаётся таблица, если она отсутствует.
- Данные сохраняются в базе данных SQLite.

---

## Сервис сокращения URL

Этот сервис предоставляет API для сокращения URL и получения их данных.

### Эндпоинты

- **POST /shorten**: Создание короткой ссылки.
  - Параметры: полный URL в формате JSON (`{"url": "..."}`).
  - Возвращает: короткий URL.
- **GET /items**: Получение списка всех записей с сокращёнными ссылками.
- **GET /items/{item_id}**: Получение информации о записи по её ID.
  - Включает короткую ссылку и полный URL.
- **GET /{short_id}**: Перенаправление на полный URL по короткой ссылке.
- **GET /stats/{short_id}**: Получение информации о короткой ссылке.
  - Возвращает JSON с коротким и полным URL.
- **PUT /{short_id}**: Обновление полного URL для существующей короткой ссылки.
- **DELETE /{short_id}**: Удаление записи по короткой ссылке.

### Особенности

- При запуске сервиса автоматически создаётся таблица, если она отсутствует.
- Данные сохраняются в базе данных SQLite.

---

## Контейнеризация (Docker)

Каждый сервис включает `Dockerfile` для упрощения контейнеризации.

### Содержание `Dockerfile`

- Устанавливает зависимости из файла `requirements.txt`.
- Копирует исходный код сервиса в контейнер.
- Объявляет том (`VOLUME /app/data`) для хранения данных.
- Запускает приложение FastAPI с использованием `uvicorn` на порту 80.

### Запуск сервисов через Docker

Сервисы можно запустить с помощью следующих команд:

#### TODO-сервис

```bash
docker run -d -p 8000:80 -v todo_data:/app/data denistkachenko/todo_service:latest
```
#### Сервис сокращения URL

```bash
docker run -d -p 8000:80 -v todo_data:/app/data denistkachenko/shorturl_service:latest
```
